<!--
  ~ Copyright 2024-2025 Martin Atanasov.
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div th:fragment="vertical-category-management-item">
    <div class="is-fullheight" th:if="${products}">

        <div class="columns is-gapless">

            <div class="column">

                <div class="table-container">

                    <table class="table is-striped is-hoverable is-fullwidth" style="border-radius: 0.75rem;">
                        <!-- T-HEAD-->
                        <thead>
                        <tr>
                            <th><abbr>#</abbr></th>
                            <th><abbr th:title="#{table.product.image}">[[#{table.product.image}]]</abbr></th>
                            <th><abbr th:title="#{table.product.name}">[[#{table.product.name}]]</abbr></th>
                            <th><abbr th:title="#{table.product.stock}">[[#{table.product.stock}]]</abbr></th>
                            <th><abbr th:title="#{table.product.visible}">[[#{table.product.visible}]]</abbr></th>
                            <th><abbr th:title="#{table.product.searchable}">[[#{table.product.searchable}]]</abbr></th>
                            <th><abbr th:title="#{table.product.number}">[[#{table.product.number}]]</abbr></th>
                            <th><abbr th:title="#{table.product.barcode}">[[#{table.product.barcode}]]</abbr></th>
                            <th><abbr th:title="#{table.user.created}">[[#{table.user.created}]]</abbr></th>
                            <th><abbr th:title="#{table.user.modified}">[[#{table.user.modified}]]</abbr></th>
                            <th><abbr th:title="#{table.user.action}">[[#{table.user.action}]]</abbr></th>
                        </tr>
                        </thead>
                        <!-- T-FOOTER-->
                        <tfoot>
                        <tr>
                            <th><abbr>#</abbr></th>
                            <th><abbr th:title="#{table.product.image}">[[#{table.product.image}]]</abbr></th>
                            <th><abbr th:title="#{table.product.name}">[[#{table.product.name}]]</abbr></th>
                            <th><abbr th:title="#{table.product.stock}">[[#{table.product.stock}]]</abbr></th>
                            <th><abbr th:title="#{table.product.visible}">[[#{table.product.visible}]]</abbr></th>
                            <th><abbr th:title="#{table.product.searchable}">[[#{table.product.searchable}]]</abbr></th>
                            <th><abbr th:title="#{table.product.number}">[[#{table.product.number}]]</abbr></th>
                            <th><abbr th:title="#{table.product.barcode}">[[#{table.product.barcode}]]</abbr></th>
                            <th><abbr th:title="#{table.user.created}">[[#{table.user.created}]]</abbr></th>
                            <th><abbr th:title="#{table.user.modified}">[[#{table.user.modified}]]</abbr></th>
                            <th><abbr th:title="#{table.user.action}">[[#{table.user.action}]]</abbr></th>
                        </tr>
                        </tfoot>
                        <!-- T-BODY-->
                        <tbody>
                        <span th:each="product, iterStat : ${products}" class="vertical-card-management-item">
                            <form action="#"
                                  th:action="@{/Management/update/{category}/{id}(category=${product.category.name}, id=${product.id})}"
                                  method="POST">
                                <tr>
                                    <th th:text="${iterStat.count}"></th>
                                    <td>
                                        <figure class="is-96x96 is-skeleton">
                                            <img th:if="${product.imageUrl}"
                                                 height="96px"
                                                 width="96px"
                                                 th:src="@{${product.imageUrl}}"
                                                 th:alt="${product.description}"
                                                 th:title="${product.productName}"/>
                                        </figure>
                                    </td>
                                    <td th:text="${product.productName}"></td>
                                    <td th:text="${product.stock}"></td>
                                    <td>
                                        <div class="select">
                                            <select name="isVisible" th:id="'isVisible-' + ${product.id}">
                                                <option th:value="true"
                                                        th:selected="${product.isVisible} == true">True</option>
                                                <option th:value="false" th:selected="${product.isVisible} == false">False</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="select">
                                            <select name="isSearchable" th:id="'isSearchable-' + ${product.id}">
                                                <option th:value="true" th:selected="${product.isSearchable} == true">True</option>
                                                <option th:value="false" th:selected="${product.isSearchable} == false">False</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td th:text="${product.productNumber == null ? '/':product.productNumber}"></td>
                                    <td th:text="${product.barcodeUtc}"></td>
                                    <td th:text="${#dates.format(product.creationDate, 'dd.MM.yyyy, HH:mm')}"></td>
                                    <td th:text="${#dates.format(product.modifyDate, 'dd.MM.yyyy, HH:mm')}"></td>
                                    <td>
                                        <button type="submit"
                                                class="button is-text is-rounded p-0 is-skeleton"
                                                style="min-width: 0; min-height: 0; width: auto; height: auto;">[[#{form.save.changes}]]</button>
                                    </td>

                                    <input type="hidden" name="pageNumber" th:value="${pageNumber}"/>
                                    <input type="hidden" name="pageSize" th:value="${pageSize}"/>
                                    <input type="hidden" name="sortValue" th:value="${sortValue}"/>

                                </tr>
                            </form>
                        </span>
                        </tbody>
                    </table>

                </div>

            </div>

        </div>
        <!-- After columns container-->

    </div>
</div>